using Microsoft.EntityFrameworkCore;
using TalentoPlus.Infrastructure.Data;
using TalentoPlus.Core.Entities;

// Crear contexto
var options = new DbContextOptionsBuilder<ApplicationDbContext>()
    .UseSqlite("Data Source=../../talentoplus.db")
    .Options;

using var context = new ApplicationDbContext(options);

// Verificar y agregar datos
if (!context.Employees.Any())
{
    var position = context.Positions.FirstOrDefault();
    var department = context.Departments.FirstOrDefault();
    var status = context.EmployeeStatuses.FirstOrDefault();
    var education = context.EducationLevels.FirstOrDefault();
    
    if (position != null && department != null && status != null && education != null)
    {
        var employees = new[]
        {
            new Employee
            {
                Document = "12345678",
                FirstName = "Juan",
                LastName = "Pérez",
                Email = "juan.perez@empresa.com",
                Phone = "555-1234",
                Address = "Calle Principal 123",
                BirthDate = new DateTime(1990, 5, 15),
                PositionId = position.Id,
                DepartmentId = department.Id,
                EmployeeStatusId = status.Id,
                EducationLevelId = education.Id,
                Salary = 50000,
                HireDate = new DateTime(2020, 3, 10),
                ProfessionalProfile = "Desarrollador senior con 5 años de experiencia",
                PasswordHash = BCrypt.Net.BCrypt.HashPassword("password123"),
                IsEnabled = true,
                RegistrationDate = DateTime.UtcNow
            },
            new Employee
            {
                Document = "87654321",
                FirstName = "María",
                LastName = "Gómez",
                Email = "maria.gomez@empresa.com",
                Phone = "555-5678",
                Address = "Avenida Central 456",
                BirthDate = new DateTime(1985, 8, 22),
                PositionId = position.Id,
                DepartmentId = department.Id,
                EmployeeStatusId = status.Id,
                EducationLevelId = education.Id,
                Salary = 45000,
                HireDate = new DateTime(2021, 6, 15),
                ProfessionalProfile = "Analista de sistemas",
                PasswordHash = BCrypt.Net.BCrypt.HashPassword("password123"),
                IsEnabled = true,
                RegistrationDate = DateTime.UtcNow
            },
            new Employee
            {
                Document = "11223344",
                FirstName = "Carlos",
                LastName = "Rodríguez",
                Email = "carlos.rodriguez@empresa.com",
                Phone = "555-9012",
                Address = "Plaza Mayor 789",
                BirthDate = new DateTime(1992, 11, 30),
                PositionId = position.Id,
                DepartmentId = department.Id,
                EmployeeStatusId = status.Id,
                EducationLevelId = education.Id,
                Salary = 55000,
                HireDate = new DateTime(2019, 1, 20),
                ProfessionalProfile = "Gerente de proyecto",
                PasswordHash = BCrypt.Net.BCrypt.HashPassword("password123"),
                IsEnabled = true,
                RegistrationDate = DateTime.UtcNow
            }
        };
        
        context.Employees.AddRange(employees);
        context.SaveChanges();
        Console.WriteLine("✅ 3 empleados de prueba agregados");
    }
    else
    {
        Console.WriteLine("⚠️  Primero crea posiciones, departamentos, etc.");
    }
}
else
{
    Console.WriteLine("✅ Ya hay empleados en la base de datos");
}
